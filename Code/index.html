<!DOCTYPE html>
<html>
<script src="jquery.min.js"></script>
<script src="script.js"></script>

<head>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="collision_warning.css">
  <link rel="stylesheet" type="text/css" href="css/flightindicators.css">
</head>

<body onload="doOnReady()">

  <h1 align="center"> MAV Intelligence Platform </h1>


  <!--
<div class="FlightVariables">
  Flight Variables
<div class="BottomFeed">
  Bottom Camera Feed
</div>
<div class="AttitudeFeed">
  Attitude Feed
</div>
<div class="SensorFeed">
  Sensor Feed
</div>
<div class="FrontFeed">
  Front Feed
</div>
-->

  <div class='DataContainer'>
    <div class='LeftContainer'>
      <div class='FlightVariables'>
        <div class="container">
          <p class="heading">Flight Variables</p>
          <p id="bottomSonarRange"></p>
          <p id="speed"></p>
        </div>
      </div>
      <div>
          <span id="airspeed"></span>
          <span id="attitude"></span>
          <span id="altimeter"></span>            
      </div><div>
          <span id="turn_coordinator"></span>
          <span id="heading"></span>
          <span id="variometer"></span>
      </div>
    </div>
    <div class='CenterContainer'>
      <div class='FrontFeed'>
        <img id="frontFeed" src="">
      </div>
    </div>
    <div class='CenterContainer'>
      <div class='BottomFeed'>
        <img id="bottomFeed" src="">
      </div>
      <div class='DepthMap'> Depth Map </div>
      <div class="SensorFeed">
        <div id="colWarContainer">
          <object id="colWarMAV" type="image/svg+xml" data="svg/col_war01.svg"></object>
          <object id="colWarFrontSonar" type="image/svg+xml" data="svg/col_war02.svg"></object>
          <object id="colWarLeftSonar" type="image/svg+xml" data="svg/col_war02.svg"></object>
          <object id="colWarRightSonar" type="image/svg+xml" data="svg/col_war02.svg"></object>
        </div>
      </div>

    </div>
  </div>

</body>
<script type="text/javascript">
  // Dynamic examples
  var attitude = $.flightIndicator('#attitude', 'attitude', {roll:50, pitch:-20, size:200, showBox : true});
  var heading = $.flightIndicator('#heading', 'heading', {heading:150, showBox:true});
  var variometer = $.flightIndicator('#variometer', 'variometer', {vario:-5, showBox:true});
  var airspeed = $.flightIndicator('#airspeed', 'airspeed', {showBox: false});
  var altimeter = $.flightIndicator('#altimeter', 'altimeter');
  var turn_coordinator = $.flightIndicator('#turn_coordinator', 'turn_coordinator', {turn:0});
  
  // Update at 20Hz
  var increment = 0;
  setInterval(function() {
      // Airspeed update
      airspeed.setAirSpeed(80+80*Math.sin(increment/10));
  
      // Attitude update
      attitude.setRoll(30*Math.sin(increment/10));
      attitude.setPitch(50*Math.sin(increment/20));
  
      // Altimeter update
      altimeter.setAltitude(10*increment);
      altimeter.setPressure(1000+3*Math.sin(increment/50));
      increment++;
      
      // TC update - note that the TC appears opposite the angle of the attitude indicator, as it mirrors the actual wing up/down position
      turn_coordinator.setTurn((30*Math.sin(increment/10))*-1);
  
      // Heading update
      heading.setHeading(increment);
      
      // Vario update
      variometer.setVario(2*Math.sin(increment/10));
  }, 50);
  </script>
</html>